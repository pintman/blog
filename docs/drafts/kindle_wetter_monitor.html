<!DOCTYPE html>
<html lang="de" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>Wetter Monitor mit einem Kindle - /home/bakera/blog</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="https://blog.bakera.de/drafts/kindle_wetter_monitor.html">

        <meta name="author" content="marco.bakera" />
        <meta name="keywords" content="Hacking,Hardware" />
        <meta name="description" content="E-Book-Reader haben meist ein E-Ink-Display, ein schönes Gehäuse und ältere Modelle bekommt man für wenig Geld. Genau diese Kombination machen sie so reizvoll, um daraus ein Türschild zu bauen oder, um sie als Wetteranzeige zu verwenden. Die Displays stellen die Informationen sehr scharf dar und verbrauchen nur wenig Strom. Setup …" />

        <meta property="og:site_name" content="/home/bakera/blog" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="Wetter Monitor mit einem Kindle"/>
        <meta property="og:url" content="https://blog.bakera.de/drafts/kindle_wetter_monitor.html"/>
        <meta property="og:description" content="E-Book-Reader haben meist ein E-Ink-Display, ein schönes Gehäuse und ältere Modelle bekommt man für wenig Geld. Genau diese Kombination machen sie so reizvoll, um daraus ein Türschild zu bauen oder, um sie als Wetteranzeige zu verwenden. Die Displays stellen die Informationen sehr scharf dar und verbrauchen nur wenig Strom. Setup …"/>
        <meta property="article:published_time" content="2018-07-03" />
            <meta property="article:section" content="Sonstiges" />
            <meta property="article:tag" content="Hacking" />
            <meta property="article:tag" content="Hardware" />
            <meta property="article:author" content="marco.bakera" />


    <!-- Bootstrap -->
        <link rel="stylesheet" href="https://blog.bakera.de/theme/css/bootstrap.min.css" type="text/css"/>
    <link href="https://blog.bakera.de/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="https://blog.bakera.de/theme/css/pygments/native.css" rel="stylesheet">
    <link href="https://blog.bakera.de/theme/tipuesearch/tipuesearch.css" rel="stylesheet">
    <link rel="stylesheet" href="https://blog.bakera.de/theme/css/style.css" type="text/css"/>

        <link href="https://blog.bakera.de/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="/home/bakera/blog ATOM Feed"/>




</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
	<div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="https://blog.bakera.de/" class="navbar-brand">
/home/bakera/blog            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                         <li><a href="https://blog.bakera.de/pages/impressum.html">
                             Impressum, Datenschutz
                          </a></li>
                         <li><a href="https://blog.bakera.de/pages/wiki.html">
                             Wiki
                          </a></li>
                         <li><a href="https://blog.bakera.de/pages/about.html">
                             Über
                          </a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
              <li><span>
                <form class="navbar-search" action="/search.html">
                  <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input" required>
                </form></span>
              </li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->
<!-- Banner -->
<!-- End Banner -->
<div class="container">
    <div class="row">
        <div class="col-sm-9">
    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="https://blog.bakera.de/drafts/kindle_wetter_monitor.html"
                       rel="bookmark"
                       title="Permalink to Wetter Monitor mit einem Kindle">
                        Wetter Monitor mit einem Kindle
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2018-07-03T12:20:00+02:00"> Di 03 Juli 2018</time>
    </span>





<span class="label label-default">Tags</span>
	<a href="https://blog.bakera.de/tag/hacking.html">Hacking</a>
        /
	<a href="https://blog.bakera.de/tag/hardware.html">Hardware</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <img alt="Kindle mit Wetteranzeige" src="https://blog.bakera.de/images/2018/07/kindle_weather_display.jpg" style="width: 100%;" />
<p>E-Book-Reader haben meist ein E-Ink-Display, ein schönes Gehäuse und ältere
Modelle bekommt man für wenig Geld.
Genau diese Kombination machen sie so reizvoll, um
daraus ein Türschild zu bauen oder, um sie als Wetteranzeige zu verwenden. Die
Displays stellen die Informationen sehr scharf dar und verbrauchen nur wenig
Strom.</p>
<div class="section" id="setup-des-kindle">
<h2>Setup des Kindle</h2>
<p>In einem kleinen Projekt wollte ich mich eines
<a class="reference external" href="https://de.wikipedia.org/wiki/Amazon_Kindle#Kindle_Keyboard_(3._Generation)">Kindle-Keyboard</a>
annehmen, um das Gerät für eigene Anzeigewecke zu ge- bzw. misbrauchen.
Diese Geräte bekommt man für ca. 30-40 € gebraucht bei Ebay und sie
lassen sich gut mit einem JailBreak öffnen und für eigene Projekte
umfunktionieren. Das Mobileread-Forum bietet hierfür eine schöne
<a class="reference external" href="https://wiki.mobileread.com/wiki/Kindle_Hacks_Information#Jail_break_JB">Anleitung für JailBreak</a>
an.</p>
<p>Die Kurzform lautet in etwa wie folgt:</p>
<ol class="arabic simple">
<li>Kindle an den USB-Port stöpseln,</li>
<li>die richtige Firmware im Wurzelverzeichnis des USB-Laufwerkes ablegen und</li>
<li>im Menü <em>HOME &gt; MENU &gt; Settings &gt; MENU &gt; Update your Kindle</em> die Firmware-Aktualisierung
auswählen.</li>
</ol>
<p>Das Prozedere funktioniert erstaunlich einfach und ohne größere Probleme.</p>
<div class="section" id="ssh-server-einrichten">
<h3>SSH-Server einrichten</h3>
<p>Neben dem Jailbreak sollte man das <em>USB-Network</em> installieren. Der Name ist
etwas irreführend, hat es doch nicht
ausschließlich etwas mit USB zu tun, sondern richtet auch einen SSH-Server ein.
Auf diesen kann man sich dann über USB oder Wifi verbinden - sofern der gewählte
Kindle über Wifi verfügt.
Nach einem Neustart sollte man den eigenen SSH-Key an der richtigen
Stelle unter ablegen. Die ausführliche Anleitung im Jailbreak hilft weiter.</p>
<p>Nach einem Neustart kann der Kindle in den Debug-Modus versetzt werden. Dazu
gibt man auf der Home-Seite <tt class="docutils literal">;debugOn</tt> ein. Das USB Network startet man mit
<tt class="docutils literal">~usbNetwork</tt> . Anschließend kann man sich per SSH mit dem Kindle verbinden.</p>
<p>Prinzipiell kann das Geräte nun alles Anzeigen, was sich in Form eines
PNG-Bildes auf einem Server befindet. Hierfür richtet man einen Cronjob ein,
der das Bild vom Server herunterlädt und im Vollbild auf dem Kindle anzeigt.</p>
</div>
<div class="section" id="cronjob-einrichten">
<h3>Cronjob einrichten</h3>
<p>Das Einrichten des Cronjobs stellte sich komplizierter heraus als zunächst
angenommen. Auf dem gewohnten Wege mit <tt class="docutils literal">crontab <span class="pre">-e</span></tt> klappte es zunächst
nicht. Auch ein direktes Ändern des Cronfiles <tt class="docutils literal">/etc/crontab/root</tt> führte zu
keinem Ergebnis, da die Datei nicht editierbar ist. Der Grund: das Dateisystem
wird read-only (nur lesend) eingebunden. Man kann es mit <tt class="docutils literal">mntroot rw</tt> als
beschreibbares Dateisystem mounten und anschließend das Cronfile editieren.</p>
</div>
<div class="section" id="bilder-auf-dem-kindle-darstellen">
<h3>Bilder auf dem Kindle darstellen</h3>
<p>Für die Darstellung von Bildern und Text auf dem Kindle ist das
Kommandozeilentool
<a class="reference external" href="https://wiki.mobileread.com/wiki/Eips">eips</a> zuständig - vermutlich
steht die Abkürzung für <em>e ink postscript</em>. Damit
kann man den Bildschirm löschen, Text und auch Bilder anzeigen.</p>
</div>
</div>
<div class="section" id="setup-des-servers">
<h2>Setup des Servers</h2>
<p>Beim Einrichten des Servers ist mir aufgefallen, wir schwer es ist, an deutsche
Wetterdaten zu kommen:  als Web-Service, den ich ohne Anmeldung einfach
aufrufen kann. Ich habe mich dann für einen etwas umständlichen Weg entschieden:
über den norwegischen Wetterdienst <a class="reference external" href="https://www.yr.no">YR</a>. Diese haben
schöne und <a class="reference external" href="https://www.yr.no/place/Germany/North_Rhine-Westphalia/Bochum/hour_by_hour.html">übersichtliche Darstellungen - hier z.B.
für Bochum</a>.
Aus einem PDF habe ich mit inkscape ein SVG erzeugt, dieses etwas
zurechgeschnitten und in ein PNG konvertiert. Hierbei wird das Bild
gedreht. Zum Schluss wird das PNG in ein Graustufenbild gewandelt und etwas
komprimiert. Dieser Prozess wird durch einen Cronjob regelmäßig durchgeführt
und das Ergebnisbild auf einem lokalen Webserver abgelegt.</p>
<p>Diese Bemühungen sind in einem
<a class="reference external" href="https://github.com/pintman/wettermonitor">github repo</a> beschrieben.</p>
</div>
<div class="section" id="die-schultern-der-giganten">
<h2>Die Schultern der Giganten</h2>
<p>Mein Projekt fußt auf dem Projekt <a class="reference external" href="https://mpetroff.net/2012/09/kindle-weather-display/">Kindle Weather
Display</a> von Matthew Petroff
und der <a class="reference external" href="http://www.shatteredhaven.com/2012/11/1347365-kindle-weather-display.html">Anleitung &quot;Kindle Weather Display&quot; von
Jennifer</a></p>
</div>

	<style>
#pcs-comment-form input,
#pcs-comment-form textarea {
	width: 100%;
}
#pcs-comment-form-display-replyto {
	border: solid 1px black;
	padding: 2px;
}
#pcs-comment-form-display-replyto p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}
#pcs-comments ul {
	list-style: none;
}
#pcs-comments .comment-left {
	display: table-cell;
	padding-right: 10px;
}
#pcs-comments .comment-body {
	display: table-cell;
	vertical-align: top;
	width: 100%;
}
</style>

	<section id="pcs-comments">
	<header>
		<h2>Comments</h2>
		<hr/>
	</header>
		<p>There are no comments yet.</p>
	<section>
	<form id="pcs-comment-form" action="#">
		<legend>Add a Comment</legend>
		<input type="hidden" id="pcs-comment-form-input-replyto">
		<fieldset>
			<label for="pcs-comment-form-input-name">Name</label>
			<input  id="pcs-comment-form-input-name" type="text" placeholder="Enter your name or nickname" />
		</fieldset>
		<fieldset>
			<label for="pcs-comment-form-input-website">Website</label>
			<input  id="pcs-comment-form-input-website" type="text" placeholder="Enter your website (optional)" />
		</fieldset>
		<fieldset>
			<label   for="pcs-comment-form-input-textarea">Your Comment</label>
			<textarea id="pcs-comment-form-input-textarea" rows="5" style="resize:vertical;" placeholder="Your comment"></textarea>
			<p>You can use the <a href="https://en.wikipedia.org/wiki/Markdown">Markdown</a> syntax to format your comment.</p>
			<div style="display: none; " id="pcs-comment-form-display-replyto"></div>
		</fieldset>

		<button type="submit"
				id="pcs-comment-form-button-submit"
				>Post via email</button>

			<a href="https://blog.bakera.de/feeds/comment.kindle_wetter_monitor.atom.xml">
				Comment Atom Feed
			</a>
	</form>
</section>

</section>

			<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
	<script type="text/javascript" src="https://blog.bakera.de/theme/js/comments.js"></script>
	<script type="text/javascript">
		$(document).ready(function() {
			CommentSystem.email_user   = "pintman";
			CommentSystem.email_domain = "bakera.de";
			CommentSystem.display_replyto_html = function(comment_content, article_slug, author) { 
				return ''
					+ '<button style="float:right;" onclick="CommentSystem.cancelReply(); return false;" title="Cancel the reply">'
					+ 	'×'
					+ '</button>'
					+ '<p>This comment will be posted as a reply to \'<a title="'+comment_content+'" href="#comment-'+article_slug+'">'+author+'</a>\'</p>';
			};

			$('#pcs-comment-form').on("submit",
				function( event )
				{
					event.preventDefault();
					$(location).attr('href', CommentSystem.getMailtoLink("kindle_wetter_monitor"));
				}
			);
		});
	</script>


            </div>
            <!-- /.entry-content -->
        </article>
    </section>

        </div>
        <div class="col-sm-3" id="sidebar">
            <aside>

<section class="well well-sm">
    <ul class="list-group list-group-flush">
            <li class="list-group-item"><h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Social</span></h4>
              <ul class="list-group" id="social">
                <li class="list-group-item"><a href="https://www.twitter.com/pintman"><i class="fa fa-twitter-square fa-lg"></i> twitter</a></li>
                <li class="list-group-item"><a href="https://twitter.bakera.de"><i class="fa fa-twitter-square fa-lg"></i> twitter Archiv</a></li>
                <li class="list-group-item"><a href="https://github.com/pintman"><i class="fa fa-github-square fa-lg"></i> github</a></li>
                <li class="list-group-item"><a href="https://github.com/tbs1-bo"><i class="fa fa-github-square fa-lg"></i> github TBS1</a></li>
                <li class="list-group-item"><a href="https://gitlab.com/pintman"><i class="fa fa-git-square fa-lg"></i> gitlab</a></li>
                <li class="list-group-item"><a href="https://edugit.org/bak"><i class="fa fa-git-square fa-lg"></i> edugit</a></li>
              </ul>
            </li>





    </ul>
</section>            </aside>
        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2018 Marco Bakera
            &middot; Powered by <a href="https://github.com/getpelican/pelican-themes/tree/master/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="https://blog.bakera.de/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="https://blog.bakera.de/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="https://blog.bakera.de/theme/js/respond.min.js"></script>


</body>
</html>